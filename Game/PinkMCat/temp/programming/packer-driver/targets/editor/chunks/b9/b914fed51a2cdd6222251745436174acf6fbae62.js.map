{"version":3,"sources":["file:///F:/oldCode/PinkMCat/assets/src/clientEvent.ts"],"names":["error","_decorator","ccclass","oneToMultiListener","on","eventName","handler","target","objHandler","handlerList","handlers","i","length","push","off","oldObj","splice","dispatchEvent","args","params","arguments","apply","setSupportEventList","arrSupportEvent","Array","supportEvent","offAll","eventNameObj","SELECTTAB","ClientEvent","Test"],"mappings":"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","sourcesContent":["import { error, _decorator } from \"cc\";\r\nconst { ccclass } = _decorator;\r\n\r\n\r\n@ccclass(\"oneToMultiListener\")\r\nexport class oneToMultiListener {\r\n    static eventNameObj = {\r\n        SELECTTAB: \"selectTab\",\r\n    }\r\n\r\n    static handlers: { [name: string]: { handler: Function, target: any }[] };\r\n    static supportEvent: { [name: string]: string };\r\n\r\n    public static on(eventName: string, handler: Function, target?: any) {\r\n        const objHandler = { handler: handler, target: target };\r\n        let handlerList = this.handlers[eventName];\r\n        if (!handlerList) {\r\n            handlerList = [];\r\n            this.handlers[eventName] = handlerList;\r\n        }\r\n\r\n        for (var i = 0; i < handlerList.length; i++) {\r\n            if (!handlerList[i]) {\r\n                handlerList[i] = objHandler;\r\n                return i;\r\n            }\r\n        }\r\n\r\n        handlerList.push(objHandler);\r\n\r\n        return handlerList.length;\r\n    };\r\n\r\n    public static off(eventName: string, handler: Function, target?: any) {\r\n        const handlerList = this.handlers[eventName];\r\n\r\n        if (!handlerList) {\r\n            return;\r\n        }\r\n\r\n        for (let i = 0; i < handlerList.length; i++) {\r\n            const oldObj = handlerList[i];\r\n            if (oldObj.handler === handler && (!target || target === oldObj.target)) {\r\n                handlerList.splice(i, 1);\r\n                break;\r\n            }\r\n        }\r\n    };\r\n\r\n    public static dispatchEvent(eventName: string, ...args: any) {\r\n        // if (this.supportEvent !== null && !this.supportEvent.hasOwnProperty(eventName)) {\r\n        //     cc.error(\"please add the event into clientEvent.js\");\r\n        //     return;\r\n        // }\r\n\r\n        const handlerList = this.handlers[eventName];\r\n\r\n        const params = [];\r\n        let i;\r\n        for (i = 1; i < arguments.length; i++) {\r\n            params.push(arguments[i]);\r\n        }\r\n\r\n        if (!handlerList) {\r\n            return;\r\n        }\r\n\r\n        for (i = 0; i < handlerList.length; i++) {\r\n            const objHandler = handlerList[i];\r\n            if (objHandler.handler) {\r\n                objHandler.handler.apply(objHandler.target, args);\r\n            }\r\n        }\r\n    };\r\n\r\n    public static setSupportEventList(arrSupportEvent: string[]) {\r\n        if (!(arrSupportEvent instanceof Array)) {\r\n            error(\"supportEvent was not array\");\r\n            return false;\r\n        }\r\n\r\n        this.supportEvent = {};\r\n        for (let i in arrSupportEvent) {\r\n            const eventName = arrSupportEvent[i];\r\n            this.supportEvent[eventName] = i;\r\n        }\r\n\r\n\r\n        return true;\r\n    };\r\n\r\n    public static offAll(eventName: string) {\r\n        let handlerList = this.handlers[eventName];\r\n        if (!handlerList) {\r\n            return;\r\n        }\r\n        this.handlers[eventName] = [];\r\n    }\r\n}\r\n\r\n@ccclass(\"ClientEvent\")\r\nexport class ClientEvent extends oneToMultiListener {\r\n    static handlers = {};\r\n    //------------------------------------------\r\n    static Test = \"Test\";\r\n};\r\n"]}