{"version":3,"sources":["file:///Users/huwenting/Documents/Web3Pink/PinkMCat/assets/perf/Alert.js"],"names":["_cjsLoader","__cjsMetaURL","url","define","exports","require","module","__filename","__dirname","Alert","_alert","_detailLabel","_cancelButton","_enterButton","_enterCallBack","_animSpeed","show","detailString","enterCallBack","needCancel","animSpeed","self","undefined","cc","loader","loadRes","Prefab","error","prefab","alert","instantiate","cbFadeOut","callFunc","onFadeOutFinish","cbFadeIn","onFadeInFinish","actionFadeIn","sequence","spawn","fadeTo","scaleTo","actionFadeOut","find","getComponent","Label","on","onButtonClicked","parent","startFadeIn","configAlert","string","active","x","eventManager","pauseTarget","position","p","setScale","opacity","runAction","startFadeOut","resumeTarget","onDestory","event","target","name","destroy","_cjsExports"],"mappings":"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","sourcesContent":["import _cjsLoader from 'cce:/internal/ml/cjs-loader.mjs';\nlet _cjsExports;\nconst __cjsMetaURL = import.meta.url;\n_cjsLoader.define(__cjsMetaURL, function (exports, require, module, __filename, __dirname) {\n// #region ORIGINAL CODE\n\n\n var Alert = {\n     _alert: null,           // prefab\n     _detailLabel:   null,   // 内容\n     _cancelButton:  null,   // 确定按钮\n     _enterButton:   null,   // 取消按钮\n     _enterCallBack: null,   // 回调事件\n     _animSpeed:     0.3,    // 动画速度\n };\n\n /**\n  * detailString :   内容 string 类型.\n  * enterCallBack:   确定点击事件回调  function 类型.\n  * neeCancel:       是否展示取消按钮 bool 类型 default YES.\n  * duration:        动画速度 default = 0.3.\n */\n Alert.show = function (detailString, enterCallBack, needCancel, animSpeed) {\n\n     // 引用\n     var self = this;\n\n     // 判断\n     if (Alert._alert != undefined) return;\n\n     // \n     Alert._animSpeed = animSpeed ? animSpeed : Alert._animSpeed;\n\n     // 加载 prefab 创建\n     cc.loader.loadRes(\"Alert\", cc.Prefab, function (error, prefab) {\n\n         if (error) {\n             cc.error(error);\n             return;\n         }\n\n         // 实例 \n         var alert = cc.instantiate(prefab);\n\n         // Alert 持有\n         Alert._alert = alert;\n\n         // 动画 \n         var cbFadeOut = cc.callFunc(self.onFadeOutFinish, self);\n         var cbFadeIn = cc.callFunc(self.onFadeInFinish, self);\n         self.actionFadeIn = cc.sequence(cc.spawn(cc.fadeTo(Alert._animSpeed, 255), cc.scaleTo(Alert._animSpeed, 1.0)), cbFadeIn);\n         self.actionFadeOut = cc.sequence(cc.spawn(cc.fadeTo(Alert._animSpeed, 0), cc.scaleTo(Alert._animSpeed, 2.0)), cbFadeOut);\n\n         // 获取子节点\n         Alert._detailLabel = cc.find(\"alertBackground/detailLabel\", alert).getComponent(cc.Label);\n         Alert._cancelButton = cc.find(\"alertBackground/cancelButton\", alert);\n         Alert._enterButton = cc.find(\"alertBackground/enterButton\", alert);\n\n         // 添加点击事件\n         Alert._enterButton.on('click', self.onButtonClicked, self);\n         Alert._cancelButton.on('click', self.onButtonClicked, self);\n\n         // 父视图\n         Alert._alert.parent = cc.find(\"Canvas\");\n\n         // 展现 alert\n         self.startFadeIn();\n\n         // 参数\n         self.configAlert(detailString, enterCallBack, needCancel, animSpeed);\n         \n     });\n\n     // 参数\n     self.configAlert = function (detailString, enterCallBack, needCancel, animSpeed) {\n\n         // 回调\n         Alert._enterCallBack = enterCallBack;\n\n         // 内容\n         Alert._detailLabel.string = detailString;\n         // 是否需要取消按钮\n         if (needCancel || needCancel == undefined) { // 显示\n             Alert._cancelButton.active = true;\n         } else {  // 隐藏\n             Alert._cancelButton.active = false;\n             Alert._enterButton.x = 0;\n         }\n     };\n\n     // 执行弹进动画\n     self.startFadeIn = function () {\n         cc.eventManager.pauseTarget(Alert._alert, true);\n         Alert._alert.position = cc.p(0, 0);\n         Alert._alert.setScale(2);\n         Alert._alert.opacity = 0;\n         Alert._alert.runAction(self.actionFadeIn);\n     };\n\n     // 执行弹出动画\n     self.startFadeOut = function () {\n         cc.eventManager.pauseTarget(Alert._alert, true);\n         Alert._alert.runAction(self.actionFadeOut);\n     };\n\n     // 弹进动画完成回调\n     self.onFadeInFinish = function () {\n         cc.eventManager.resumeTarget(Alert._alert, true);\n     };\n\n     // 弹出动画完成回调\n     self.onFadeOutFinish = function () {\n         self.onDestory();\n     };\n\n     // 按钮点击事件\n     self.onButtonClicked = function(event){\n         if(event.target.name == \"enterButton\"){\n             if(self._enterCallBack){\n                 self._enterCallBack();\n             }\n         }\n         self.startFadeOut();\n     };\n\n     // 销毁 alert (内存管理还没搞懂，暂且这样写吧~v~)\n     self.onDestory = function () {\n         Alert._alert.destroy();\n         Alert._enterCallBack = null;\n         Alert._alert = null;\n         Alert._detailLabel = null;\n         Alert._cancelButton = null;\n         Alert._enterButton = null;\n         Alert._animSpeed = 0.3;\n     };\n };\n\n\n\n\n// #endregion ORIGINAL CODE\n\n_cjsExports = module.exports;\n\n\n}, {});\nexport { _cjsExports as default };\nexport { __cjsMetaURL }\n"]}